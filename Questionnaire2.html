<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 600px;
            margin: auto;
            padding: 20px;
        }
        .question {
            margin-bottom: 15px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Safety Questionnaire</h1>
        <form id="questionnaire2">
            <div class="question">
                <p>1.Do they take control of how you spend your time,who you can see,where you can go?</p>
                <input type="radio" name="q1" value="yes"> Yes
                <input type="radio" name="q1" value="no"> No 
                <input type="radio" name="q1" value="not sure"> Not sure

            </div>
            <div class="question">
                <p>2. Do they make you feel unsure about the thing whether you can look after yourself or others?</p>
                <input type="radio" name="q2" value="yes"> Yes
                <input type="radio" name="q2" value="no"> No
                <input type="radio" name="q2" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>3.Do they display their anger at other objects to possibly oppress you?</p>
                <input type="radio" name="q3" value="yes"> Yes
                <input type="radio" name="q3" value="no"> No
                <input type="radio" name="q3" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>4.Did they ever attempt to physically engage you,possibly to hurt you anytime?</p>
                <input type="radio" name="q4" value="yes"> Yes
                <input type="radio" name="q4" value="no"> No
                <input type="radio" name="q4" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>5.Do they constantly try to control your acess to money,citing they are better at managing home?</p>
                <input type="radio" name="q5" value="yes"> Yes
                <input type="radio" name="q5" value="no"> No
                <input type="radio" name="q5" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>6. Did they attempt to gaslight you (make you to question your memories and reality)?</p>
                <input type="radio" name="q6" value="yes"> Yes
                <input type="radio" name="q6" value="no"> No
                <input type="radio" name="q6" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>7.Do they attempt to justify any kind of oppression by citing it to be mundane occurence that has been accepted ancestrally?</p>
                <input type="radio" name="q7" value="yes"> Yes
                <input type="radio" name="q7" value="no"> No
                <input type="radio" name="q7" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>8.Have you found out that any flexible political opinion isn't kindly accepted by them?</p>
                <input type="radio" name="q8" value="yes"> Yes
                <input type="radio" name="q8" value="no"> No
                <input type="radio" name="q8" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>9.Do you find that they have never acknowledged by them ,professionally or circumstantially?</p>
                <input type="radio" name="q9" value="yes"> Yes
                <input type="radio" name="q9" value="no"> No
                <input type="radio" name="q9" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>10.If there are any female inhabitants,do you find that in case of clashes,they unjustly support the othe or support patriarchy?</p>
                <input type="radio" name="q10" value="yes"> Yes
                <input type="radio" name="q10" value="no"> No
                <input type="radio" name="q10" value="not sure"> Not sure
            </div>
            <div class="question">
                <p>11.Do you find yourself in an endless cycle which is tailed by aggressive verbal or physical abuse but immediately followed by cooldown period leaving you tethered?</p>
                <input type="radio" name="q11" value="yes"> Yes
                <input type="radio" name="q11" value="no"> No
                <input type="radio" name="q11" value="not sure"> Not sure
            </div>

            <button type="submit" id="submitBtn">Submit</button>
        </form>
        <script>
  document.getElementById("submitBtn").addEventListener("click", function (event) {
    // Prevent the default form submission behavior
    event.preventDefault();

    // Fetch the form element
    const form = document.getElementById("questionnaire2");
    if (!form) {
      console.error("Form element with ID 'questionnaire' not found!");
      alert("An internal error occurred. Please reload the page.");
      return;
    }

    // Create FormData object
    const formData = new FormData(form);

    // Initialize variables
    const answers = {};
    const questions = ["q1", "q2", "q3", "q4", "q5", "q6", "q7","q8", "q9", "q10", "q11"];
    const severityLevels = [2,1,2,3,1,3,2,1,1,2,3];
    let allAnswered = true;
    let maxSeverity = 0;

    // Process each question
    questions.forEach((question, index) => {
      if (formData.has(question)) {
        const answer = formData.get(question);
        answers[question] = answer;

        // If the answer is "Yes", update severity
        if (answer === "yes") {
          maxSeverity = Math.max(maxSeverity, severityLevels[index]);
        }
      } else {
        allAnswered = false; // Question not answered
      }
    });

    // Check if all questions are answered
    if (!allAnswered) {
      alert("Please answer all questions before submitting.");
      return;
    }

    // Store results and redirect
    const resultData = { answers, maxSeverity };
    localStorage.setItem("questionnaireResults2", JSON.stringify(resultData));
    window.location.href = "result2.html"; // Redirect to results page
  });
</script>

    </div>
</body>
</html>